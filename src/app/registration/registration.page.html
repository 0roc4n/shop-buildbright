<!-- <ion-content scrollbar>

  <ion-grid style="display: flex; justify-content: center;">

    <ion-card [formGroup]="registrationForm" style="width: 400px;">

      <ion-button (click)="goBack()" fill="clear">
        Back
      </ion-button>

      <ion-list>
        <ion-list-header>
          <ion-label style="
          margin-top: 0;">Personal Information: </ion-label>
        </ion-list-header>

        <div class="ion-padding" style="padding-top: 0; padding-bottom: 0;" formGroupName="userName">
          <ion-item mode="md" fill="outline" >
            <ion-label position="floating">First Name</ion-label>
            <ion-input type="text" formControlName="first" ></ion-input>
            <ion-note slot="error" *ngIf="firstNameInput.invalid && (firstNameInput.dirty || firstNameInput.touched)">First name is required</ion-note>
          </ion-item>
          <ion-item mode="md" fill="outline" style="padding-top: 10px;">
            <ion-label  position="floating">Middle Name</ion-label>
            <ion-input type="text" formControlName="middle"></ion-input>
            <ion-note slot="error" *ngIf="middleNameInput.invalid && (middleNameInput.dirty || middleNameInput.touched)">Middle name is required</ion-note>
          </ion-item>
          <ion-item mode="md" fill="outline" style="padding-top: 10px;">
            <ion-label position="floating">Last  Name</ion-label>
            <ion-input type="text"  formControlName="last" ></ion-input>
            <ion-note slot="error" *ngIf="lastNameInput.invalid && (lastNameInput.dirty || lastNameInput.touched)">Last name is required</ion-note>
          </ion-item>
        </div>

        <ion-list-header>
          <ion-label>Contact Details: </ion-label>
        </ion-list-header>

        <div class="ion-padding" style="padding-top: 0; padding-bottom: 0;">
          <ion-item mode="md" fill="outline" >
            <ion-label  position="floating">Email</ion-label>
            <ion-input type="email"  formControlName="email"></ion-input>
            <ng-container *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)">
              <ion-note slot="error" *ngIf="emailInput.errors?.['email']">Invalid Email</ion-note>
              <ion-note slot="error" *ngIf="emailInput.errors?.['required']">Email Required</ion-note>
            </ng-container>

          </ion-item>
          <ion-item mode="md" fill="outline"  style="padding-top: 10px;">
            <ion-label  position="floating">Mobile Number</ion-label>
            <ion-input type="tel" (ionInput)="selectNumbers($event)"  formControlName="mobile_no" #mobileInput></ion-input>
            <ion-note slot="error" *ngIf="mobile_noInput.invalid && (mobile_noInput.dirty || mobile_noInput.touched)">Mobile Number is required</ion-note>
          </ion-item>
        </div>

        <ion-list-header>
          <ion-label>Select Address</ion-label>
        </ion-list-header>
        <div class="ion-padding">
          <google-map [options]="mapOptions" height="300px" width="100%" #map>
            <map-marker
              #currentMarker="mapMarker">
            </map-marker>
          </google-map>
          {{address}}
        </div>


        <ion-radio-group formControlName="userTypeId">
          <ion-list-header>
            <ion-label>Select which are you: </ion-label>
          </ion-list-header>
          <ion-row>
            <ion-col size="6">
              <ion-row>
                <ion-col size="6" style="display: flex; justify-content: center;">
                  <ion-label>Rider :</ion-label>
                </ion-col>
                <ion-col size="6" style="display: flex; justify-content: center;">
                  <ion-radio [value]="usertype.Rider" mode="md"></ion-radio>
                </ion-col>
              </ion-row>
            </ion-col>
            <ion-col size="6">
              <ion-row>
                <ion-col size="6" style="display: flex; justify-content: center;">
                  <ion-label>Merchant :</ion-label>
                </ion-col>
                <ion-col size="6" style="display: flex; justify-content: center;">
                  <ion-radio [value]="usertype.Merchant" mode="md"></ion-radio>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>
        </ion-radio-group>



        <div class="ion-padding" style="padding-top: 0; padding-bottom: 0;" *ngIf="registrationForm.get('userTypeId')?.value === usertype.Merchant">
          <ion-item mode="md" fill="outline" >
            <ion-label  position="floating">Business Name</ion-label>
            <ion-input type="text" formControlName="business_name"></ion-input>
            <ion-note slot="error" *ngIf="business_nameInput.invalid && (business_nameInput.dirty || business_nameInput.touched)">Business name is required</ion-note>
          </ion-item>
        </div>

        <ion-list-header>
          <ion-label>Create Password </ion-label>
        </ion-list-header>


        <div class="ion-padding"  style="padding-top: 0; padding-bottom: 0;">
          <ion-item mode="md" fill="outline" >
            <ion-label position="floating">Password</ion-label>
              <app-show-hide-password>
                <ion-input type="password" formControlName="password"></ion-input>
              </app-show-hide-password>
            <ng-container *ngIf="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)">
              <ion-note slot="error" *ngIf="passwordInput.errors?.['minlength']">
                Password must be at atleast 6 characters long
              </ion-note>
              <ion-note slot="error" *ngIf="passwordInput.errors?.['required']">
                Password is required
              </ion-note>
            </ng-container>
          </ion-item>
        </div>



      </ion-list>
      <div class="ion-padding">
        <ion-button (click)="signUp()" expand="block" [disabled]="!registrationForm.valid">
          Sign Up
        </ion-button>
      </div>
       <div class="ion-padding">
        <ion-button (click)="goBack()" expand="block">
          Go Back
        </ion-button>
      </div>
    </ion-card>
  </ion-grid>
</ion-content> -->

<!-- <ion-content [fullscreen]="true"  scrollEvents="true" (ionScroll)="scroll($event)">
  <div style="height: 100%; display: flex;">
    <ion-card style="width: fit-content; margin: auto;" class="ion-padding" [formGroup]="registrationForm">
      <ion-grid fixed>
        <ion-item lines="none" button (click)="pickAvatar()">
          <ion-avatar slot="start">
            <ion-img [src]="registrationForm.value.profilePic === '' ? 'assets/icon/no-avatar.svg' : registrationForm.value.profilePic "></ion-img>
          </ion-avatar>
          <ion-label>
            <h1>
              Personal Information
            </h1>
            <p>Change profile picture</p>
          </ion-label>
        </ion-item>
        <ion-row formGroupName="fullname">
          <ion-col size="12" size-md="4">
            <ion-item fill="outline" mode="md">
              <ion-label position="floating">First Name</ion-label>
              <ion-input formControlName="first"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-md="4">
            <ion-item fill="outline" mode="md">
              <ion-label position="floating">Middle Initial</ion-label>
              <ion-input formControlName="middleInitial" maxLength="1"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-md="4">
            <ion-item fill="outline" mode="md">
              <ion-label position="floating">Last Name</ion-label>
              <ion-input formControlName="last"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <h1 style="margin: 0; display: flex; align-items: center;" class="ion-padding">
          <ion-icon name="key-outline"  size="large" style="padding-right: 15px;"></ion-icon>
          Account Details
        </h1>
        <ion-row>
          <ion-col size="12" size-md="6">
            <ion-item fill="outline" mode="md">
              <ion-icon name="mail-outline" slot="start"></ion-icon>
              <ion-label position="floating">Email</ion-label>
              <ion-input formControlName="email"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-md="6">
            <ion-item fill="outline" mode="md">
              <ion-label position="floating">Password</ion-label>
              <ion-input formControlName="password" [type]="passwordInput.type"></ion-input>
              <ion-icon slot="end" [name]="passwordInput.icon" (click)="clickPasswordType()"></ion-icon>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ion-item fill="outline"mode="md">
              <ion-icon name="logo-facebook" slot="start"></ion-icon>
              <ion-label position="floating">Facebook Link</ion-label>
              <ion-input placeholder="Your Facebook Permalink for verification..." formControlName="facebookPermalink"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ion-item fill="outline"mode="md">
              <ion-icon name="call-outline" slot="start"></ion-icon>
              <ion-label position="floating">Mobile Number</ion-label>
              <ion-input formControlName="mobile_no" type="text"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>

        <ng-container formArrayName="address">
          <h1 style="margin: 0; display: flex; align-items: center;" class="ion-padding">
            <ion-icon name="location-outline" size="large" style="padding-right: 15px;"></ion-icon>
            Addresses
          </h1>


          <ion-row *ngFor="let address of addressArray.controls; let i=index">
            <ng-container [formGroupName]="i">
              <ion-col size="12" size-md="4">
                <ion-item fill="outline" mode="md" >
                  <ion-icon name="compass-outline" slot="start"></ion-icon>
                  <ion-label position="floating">Label</ion-label>
                  <ion-input type="text" formControlName="label" placeholder="Your Address" (ionFocus)="getAddressFocus(i)" ></ion-input>
                </ion-item>
              </ion-col>
              <ion-col size="12" size-md="8"> -->
                <!-- <ion-searchbar placeholder="Address" [debounce]="250" ></ion-searchbar> -->
                <!-- <ion-item fill="outline"mode="md" >
                  <ion-icon name="pin-outline"  slot="start"></ion-icon>
                  <ion-label position="floating">Address</ion-label>
                  <ion-input type="text" formControlName="completeAddress" placeholder="Your Address" (ionFocus)="getAddressFocus(i)" mode="md" #addresses></ion-input>
                  <ion-button slot="end" mode="ios" *ngIf="i" (click)="removeAddress(i)"> Remove </ion-button>
                </ion-item>
              </ion-col>

            </ng-container>
          </ion-row>
          <div style="display: flex; justify-content: center;">
            <ion-button (click)="addAddress()" >  -->
              <!-- (click)="onClick()"-->
              <!-- Add Address
            </ion-button>
          </div>

        </ng-container>
        <ng-container *ngIf="addressArray.at(focusAddressIndex)?.value.coordinates as coordinates">
          <ion-card *ngIf="coordinates.lat && coordinates.lng">
            <google-map [options]="mapOptions" height="300px" width="100%" [center]="coordinates" (mapClick)="mapClicked($event)"  #map>
              <map-marker
                [position]="coordinates"
                #currentMarker="mapMarker">
              </map-marker>
            </google-map>
          </ion-card>
        </ng-container>

        <h1 style="margin: 0; display: flex; align-items: center;" class="ion-padding">
          <ion-icon name="id-card-outline" size="large" style="padding-right: 15px;"></ion-icon> Upload IDs'
        </h1>
        <div class="ion-padding" style="padding-top: 0;border: 1px solid; border-radius: 5px;">
          <ion-row style=" position: relative;" *ngFor="let id of uploadIdArray.controls; let idIndex = index">
            <div style="width: 100%; display: flex; justify-content: end;">
              <ion-button *ngIf="idIndex" (click)="deleteIdRow(idIndex)" color="danger">
                Delete Id
              </ion-button>
            </div>
            <ion-col size="12" size-md="6" class="ion-padding">
              <div style="border: 1px solid; border-radius: 5px; height: 200px; display: flex; justify-content: center; align-items: center; cursor: pointer;" class="ion-activatable" (click)="getPhoto('front',idIndex)">
                <ng-container *ngIf="id.value.front; else noImageFront">
                  <ion-img [src]="id.value.front" style="height: 100%;"></ion-img>
                </ng-container>
                <ng-template #noImageFront>
                  <ion-ripple-effect></ion-ripple-effect>
                  <h1 style="margin: 0;">
                    Front
                  </h1>
                </ng-template>
              </div>
            </ion-col>
            <ion-col size="12" size-md="6"  class="ion-padding">
              <div style="border: 1px solid; border-radius: 5px; height: 200px; display: flex; justify-content: center; align-items: center; cursor: pointer;" class="ion-activatable" (click)="getPhoto('back',idIndex)">
                <ng-container *ngIf="id.value.back;else noImageBack">
                  <ion-img [src]="id.value.back" style="height: 100%;"></ion-img>
                </ng-container>
                <ng-template #noImageBack>
                  <ion-ripple-effect></ion-ripple-effect>
                  <h1 style="margin: 0;">
                    Back
                  </h1>
                </ng-template>
              </div>
            </ion-col>
          </ion-row>
          <div style="display: flex; justify-content: center;">
            <ion-button (click)="addIdRow()" >
              Add Id
            </ion-button>
          </div>
        </div>

        <ion-button  [disabled]="!registrationForm.valid" expand="block" (click)="submit()">
          Submit
        </ion-button>
      </ion-grid>
    </ion-card>
  </div>


</ion-content> -->


<ion-content>
  <div class="cont">
    <ion-text class="title">Sign Up</ion-text>
    <ion-text>Already have an account? <a (click)="signIn()">Log In</a></ion-text>
    <div [formGroup]="registrationForm">
      <ion-card>
        <ion-card-header mode="md">
          <ion-text class="cardtitle">Personal Information</ion-text>
        </ion-card-header>
        <ion-card-content>
          <ion-avatar>
            <ion-img [src]="registrationForm.value.profilePic === '' ? 'assets/icon/no-avatar.svg' : registrationForm.value.profilePic "></ion-img>
          </ion-avatar>
            <ion-label (click)="pickAvatar()" style="color: red;">
              Change profile picture
            </ion-label>
          <ion-item mode="md" formGroupName="fullname">
            <ion-label position="floating">First Name</ion-label>
            <ion-input formControlName="first"></ion-input>
          </ion-item>
          <ion-item mode="md" formGroupName="fullname">
            <ion-label position="floating">Middle Initial</ion-label>
            <ion-input formControlName="middleInitial" maxLength="1"></ion-input>
          </ion-item>
          <ion-item mode="md" formGroupName="fullname">
            <ion-label position="floating">Last Name</ion-label>
            <ion-input formControlName="last"></ion-input>
          </ion-item>
        </ion-card-content>
      </ion-card>
      <ion-card>
        <ion-text class="cardtitle">Account Details</ion-text>
        <ion-item mode="md">
          <ion-icon name="mail-outline" slot="start"></ion-icon>
          <ion-label position="floating">Email</ion-label>
          <ion-input formControlName="email"></ion-input>
        </ion-item>
        <ion-item mode="md">
          <ion-icon name="key-outline" slot="start"></ion-icon>
          <ion-label position="floating">Password</ion-label>
          <ion-input formControlName="password" [type]="passwordInput.type"></ion-input>
          <ion-icon slot="end" [name]="passwordInput.icon" (click)="clickPasswordType()"></ion-icon>
        </ion-item>
        <ion-item mode="md">
          <ion-icon name="logo-facebook" slot="start"></ion-icon>
          <ion-label position="floating">Facebook Link</ion-label>
          <ion-input placeholder="Your Facebook Permalink for verification..." formControlName="facebookPermalink"></ion-input>
        </ion-item>
        <ion-item mode="md">
          <ion-icon name="call-outline" slot="start"></ion-icon>
          <ion-label position="floating">Mobile Number</ion-label>
          <ion-input formControlName="mobile_no" type="text"></ion-input>
        </ion-item>
      </ion-card>
      <ion-card>
        <ng-container formArrayName="address">
          <ion-text class="cardtitle">Address</ion-text>


          <ion-row *ngFor="let address of addressArray.controls; let i=index">
            <ng-container [formGroupName]="i">
              <ion-col size="12" size-md="4">
                <ion-item mode="md" >
                  <ion-icon name="compass-outline" slot="start"></ion-icon>
                  <ion-label position="floating">Label</ion-label>
                  <ion-input type="text" formControlName="label" placeholder="Your Address" (ionFocus)="getAddressFocus(i)" ></ion-input>
                </ion-item>
              </ion-col>
              <ion-col size="12" size-md="8">
                <ion-item mode="md" >
                  <ion-icon name="pin-outline"  slot="start"></ion-icon>
                  <ion-label position="floating">Address</ion-label>
                  <ion-input type="text" formControlName="completeAddress" placeholder="Your Address" (ionFocus)="getAddressFocus(i)" mode="md" #addresses></ion-input>
                  <ion-button slot="end" mode="ios" *ngIf="i" (click)="removeAddress(i)"> Remove </ion-button>
                </ion-item>
              </ion-col>

            </ng-container>
          </ion-row>
          <div style="display: flex; justify-content: center;">
            <ion-button (click)="addAddress()" > 
              Add Address
            </ion-button>
          </div>

        </ng-container>
        <ng-container *ngIf="addressArray.at(focusAddressIndex)?.value.coordinates as coordinates">
          <ion-card *ngIf="coordinates.lat && coordinates.lng">
            <google-map [options]="mapOptions" height="300px" width="100%" [center]="coordinates" (mapClick)="mapClicked($event)"  #map>
              <map-marker
                [position]="coordinates"
                #currentMarker="mapMarker">
              </map-marker>
            </google-map>
          </ion-card>
        </ng-container>
      </ion-card>
      <ion-card>
        <ion-text class="cardtitle">Upload ID</ion-text>
        <div class="ion-padding">
          <ion-row style=" position: relative;" *ngFor="let id of uploadIdArray.controls; let idIndex = index">
            <div style="width: 100%; display: flex; justify-content: end;">
              <ion-button *ngIf="idIndex" (click)="deleteIdRow(idIndex)" color="danger">
                Delete Id
              </ion-button>
            </div>
            <ion-col size="12" size-md="6" class="ion-padding">
              <div style="border: 1px solid; border-radius: 5px; height: 200px; display: flex; justify-content: center; align-items: center; cursor: pointer;" class="ion-activatable" (click)="getPhoto('front',idIndex)">
                <ng-container *ngIf="id.value.front; else noImageFront">
                  <ion-img [src]="id.value.front" style="height: 100%;"></ion-img>
                </ng-container>
                <ng-template #noImageFront>
                  <ion-ripple-effect></ion-ripple-effect>
                  <h1 style="margin: 0;">
                    Front
                  </h1>
                </ng-template>
              </div>
            </ion-col>
            <ion-col size="12" size-md="6"  class="ion-padding">
              <div style="border: 1px solid; border-radius: 5px; height: 200px; display: flex; justify-content: center; align-items: center; cursor: pointer;" class="ion-activatable" (click)="getPhoto('back',idIndex)">
                <ng-container *ngIf="id.value.back;else noImageBack">
                  <ion-img [src]="id.value.back" style="height: 100%;"></ion-img>
                </ng-container>
                <ng-template #noImageBack>
                  <ion-ripple-effect></ion-ripple-effect>
                  <h1 style="margin: 0;">
                    Back
                  </h1>
                </ng-template>
              </div>
            </ion-col>
          </ion-row>
          <div style="display: flex; justify-content: center;">
            <ion-button (click)="addIdRow()" >
              Add Id
            </ion-button>
          </div>
        </div>
      </ion-card>
      <ion-button class="submit" [disabled]="!registrationForm.valid" expand="block" (click)="submit()">
        Submit
      </ion-button>
    </div>
  </div>
</ion-content>